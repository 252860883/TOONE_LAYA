!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=13)}([function(e,t,r){"use strict";var n;r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i}),r.d(t,"d",function(){return s}),r.d(t,"c",function(){return o}),r.d(t,"e",function(){return c}),function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.serverErrorStart=-32099,e.serverErrorEnd=-32e3,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.RequestCancelled=-32800,e.MessageWriteError=1,e.MessageReadError=2}(n||(n={}));class i extends Error{constructor(e,t,r){super(t),this.code="number"==typeof e?e:n.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,i.prototype)}toJSON(){return{code:this.code,message:this.message,data:this.data}}}function s(e){const t=e;return t&&"string"==typeof t.method&&("string"==typeof t.id||"number"==typeof t.id)}function o(e){return e&&"string"==typeof e.method&&void 0===e.id}function c(e){const t=e;return t&&(void 0!==t.result||!!t.error)&&("string"==typeof t.id||"number"==typeof t.id||null===t.id)}},function(e,t,r){"use strict";var n;r.d(t,"b",function(){return n}),r.d(t,"a",function(){return s}),function(e){const t={unsubscribe(){}};e.None=(()=>t)}(n||(n={}));class i{add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({unsubscribe:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let r=!1;for(let n=0,i=this._callbacks.length;n<i;n++)if(this._callbacks[n]===e){if(this._contexts[n]===t)return this._callbacks.splice(n,1),void this._contexts.splice(n,1);r=!0}if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const t=[],r=this._callbacks.slice(0),n=this._contexts.slice(0);for(let i=0;i<r.length;i++)try{t.push(r[i].apply(n[i],e))}catch(e){console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}unsubscribe(){this._callbacks=void 0,this._contexts=void 0}}class s{get event(){return this._event||(this._event=((e,t,r)=>{let n;return this._callbacks||(this._callbacks=new i),this._callbacks.add(e,t),n={unsubscribe:()=>{this._callbacks.remove(e,t),n.unsubscribe=s._noop}},Array.isArray(r)&&r.push(n),n})),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}unsubscribe(){this._callbacks&&(this._callbacks.unsubscribe(),this._callbacks=void 0)}}s._noop=(()=>void 0)},function(e,t,r){"use strict";r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i}),r.d(t,"c",function(){return a});var n,i,s=r(1);!function(e){e.type="$/cancelRequest"}(n||(n={})),function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:s.b.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:s.b.None}),e.is=function(t){const r=t;return r&&(r===e.None||r===e.Cancelled||"boolean"==typeof r.isCancellationRequested&&!!r.onCancellationRequested)}}(i||(i={}));const o=Object.freeze((e,t)=>{const r=setTimeout(e.bind(t),0);return{unsubscribe(){clearTimeout(r)}}});class c{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this._emitter=void 0))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?o:(this._emitter||(this._emitter=new s.a),this._emitter.event)}}class a{get token(){return this._token||(this._token=new c),this._token}cancel(){this._token?this._token.cancel():this._token=i.Cancelled}unsubscribe(){this.cancel()}}},function(e,t,r){"use strict";var n;r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i}),function(e){e.Off="off",e.Messages="messages",e.Verbose="verbose"}(n||(n={}));const i={log:()=>void 0,requestSent:()=>void 0,requestReceived:()=>void 0,notificationSent:()=>void 0,notificationReceived:()=>void 0,responseSent:()=>void 0,responseCanceled:()=>void 0,responseReceived:()=>void 0,unknownResponseReceived:()=>void 0}},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r.d(t,"b",function(){return s});var n=r(1);class i{constructor(){this.errorEmitter=new n.a,this.closeEmitter=new n.a}unsubscribe(){this.errorEmitter.unsubscribe(),this.closeEmitter.unsubscribe()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${"string"==typeof e.message?e.message:"unknown"}`)}}class s{constructor(){this.errorEmitter=new n.a,this.closeEmitter=new n.a}unsubscribe(){this.errorEmitter.unsubscribe(),this.closeEmitter.unsubscribe()}get onError(){return this.errorEmitter.event}fireError(e,t,r){this.errorEmitter.fire([this.asError(e),t,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${"string"==typeof e.message?e.message:"unknown"}`)}}},function(e,t,r){"use strict";var n;r.d(t,"a",function(){return i}),function(e){e.None=0,e.First=1,e.Last=2}(n||(n={}));class i{constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}has(e){return this._map.has(e)}get(e){const t=this._map.get(e);if(t)return t.value}set(e,t,r=n.None){let i=this._map.get(e);if(i)i.value=t,r!==n.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case n.None:this.addItemLast(i);break;case n.First:this.addItemFirst(i);break;case n.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}}delete(e){const t=this._map.get(e);return!!t&&(this._map.delete(e),this.removeItem(t),this._size--,!0)}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let r=this._head;for(;r;)t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),r=r.next}forEachReverse(e,t){let r=this._tail;for(;r;)t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),r=r.previous}keys(){let e=this._head;const t={[Symbol.iterator]:()=>t,next(){if(e){const t={value:e.key,done:!1};return e=e.next,t}return{done:!0}}};return t}values(){let e=this._head;const t={[Symbol.iterator]:()=>t,next(){if(e){const t={value:e.value,done:!1};return e=e.next,t}return{done:!0}}};return t}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{const t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===n.First||t===n.Last)if(t===n.First){if(e===this._head)return;const t=e.next,r=e.previous;e===this._tail?(r.next=void 0,this._tail=r):(t.previous=r,r.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===n.Last){if(e===this._tail)return;const t=e.next,r=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=r,r.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}}},,function(e,t,r){"use strict";(function(e){r.d(t,"a",function(){return c});var n=r(5);class i extends n.a{constructor(e){super(),this.worker=e,this.pending=[],this.callback=null,e.addEventListener("message",e=>{try{this.processMessage(e)}catch(e){this.fireError(e)}}),e.addEventListener("error",t=>{this.fireError(t),o(e),this.fireClose()})}processMessage(e){const t=e.data;this.callback?this.callback(t):this.pending.push(t)}listen(e){if(this.callback)throw new Error("callback is already set");for(this.callback=e;0!==this.pending.length;)e(this.pending.pop())}unsubscribe(){super.unsubscribe(),this.callback=null,o(this.worker)}}class s extends n.b{constructor(e){super(),this.worker=e,this.errorCount=0}write(e){try{this.worker.postMessage(e)}catch(t){this.fireError(t,e,++this.errorCount)}}unsubscribe(){super.unsubscribe(),o(this.worker)}}function o(e){e.terminate?e.terminate():e.close&&e.close()}function c(t=function(){const t=e;if(!t.postMessage||"document"in t)throw new Error("global scope is not a Worker");return t}()){return{reader:new i(t),writer:new s(t)}}}).call(this,r(4))},function(e,t,r){"use strict";(function(e){r.d(t,"a",function(){return d});var n=r(2),i=r(1),s=r(6),o=r(0),c=r(3);const a=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var u,h;!function(e){e[e.Closed=1]="Closed",e[e.Unsubscribed=2]="Unsubscribed",e[e.AlreadyListening=3]="AlreadyListening"}(u||(u={}));class l extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,l.prototype)}}function d(t,r,d){return r||(r=a),function(t,r,a){let d=0,f=0,p=0;const b="2.0";let m;const v=Object.create(null);let y;const g=Object.create(null);let w=!1,_=new s.a,E=Object.create(null),x=Object.create(null),S=c.a.Off,O=c.b,k=h.New;const P=new i.a,T=new i.a,C=new i.a,j=new i.a;function R(e){return"req-"+e.toString()}function I(e,t){Object(o.d)(t)?e.set(R(t.id),t):Object(o.e)(t)?e.set(function(e){return null===e?"res-unknown-"+(++p).toString():"res-"+e.toString()}(t.id),t):e.set("not-"+(++f).toString(),t)}function $(e){}function D(){return k===h.Listening}function N(){return k===h.Unsubscribed}function q(){k!==h.New&&k!==h.Listening||(k=h.Closed,T.fire(void 0))}function A(){w||0===_.size||(w=!0,function(t){if(void 0!==e)return void e(t);setTimeout(t,0)}(()=>{w=!1,function(){if(0===_.size)return;const e=_.shift();try{Object(o.d)(e)?function(e){if(N())return;const r=Date.now();function i(n){const i={jsonrpc:b,id:e.id};n instanceof o.b?i.error=n.toJSON():i.result=void 0===n?null:n,O.responseSent(i,e,r),t.writer.write(i)}function s(n){const i={jsonrpc:b,id:e.id,error:n.toJSON()};O.responseSent(i,e,r),t.writer.write(i)}O.requestReceived(e);const c=v[e.method],a=c&&c.handler;if(a||m){const c=new n.c,u=String(e.id);x[u]=c;try{const n=void 0!==e.params?e.params:null,h=a?a(n,c.token):m(e.method,n,c.token),l=h;h?l.then?l.then(e=>{delete x[u],i(e)},t=>{delete x[u],t instanceof o.b?s(t):t&&"string"==typeof t.message?s(new o.b(o.a.InternalError,t.message,Object.assign({stack:t.stack},t))):s(new o.b(o.a.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`))}):(delete x[u],i(h)):(delete x[u],function(n){void 0===n&&(n=null);const i={jsonrpc:b,id:e.id,result:n};O.responseSent(i,e,r),t.writer.write(i)}(h))}catch(t){delete x[u],t instanceof o.b?i(t):t&&"string"==typeof t.message?s(new o.b(o.a.InternalError,t.message,Object.assign({stack:t.stack},t))):s(new o.b(o.a.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`))}}else s(new o.b(o.a.MethodNotFound,`Unhandled method ${e.method}`))}(e):Object(o.c)(e)?function(e){if(N())return;let t;if(e.method===n.a.type)t=(e=>{const t=e.id,r=x[String(t)];r&&r.cancel()});else{const r=g[e.method];r&&(t=r.handler)}if(t||y)try{O.notificationReceived(e),t?t(e.params):y(e.method,e.params)}catch(t){t.message?r.error(`Notification handler '${e.method}' failed with message: ${t.message}`):r.error(`Notification handler '${e.method}' failed unexpectedly.`)}else C.fire(e)}(e):Object(o.e)(e)?function(e){if(N())return;if(null===e.id)e.error?r.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):r.error("Received response message without id. No further error information provided.");else{const t=String(e.id),n=E[t];if(n){O.responseReceived(e,n.request||n.method,n.timerStart),delete E[t];try{if(e.error){const t=e.error;n.reject(new o.b(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");n.resolve(e.result)}}catch(e){e.message?r.error(`Response handler '${n.method}' failed with message: ${e.message}`):r.error(`Response handler '${n.method}' failed unexpectedly.`)}}else O.unknownResponseReceived(e)}}(e):function(e){if(!e)return void r.error("Received empty message.");r.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);const t=e;if("string"==typeof t.id||"number"==typeof t.id){const e=String(t.id),r=E[e];r&&r.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{A()}}()}))}t.reader.onClose(q),t.reader.onError(function(e){P.fire([e,void 0,void 0])}),t.writer.onClose(q),t.writer.onError(function(e){P.fire(e)});const L=e=>{try{if(Object(o.c)(e)&&e.method===n.a.type){const r=R(e.params.id),n=_.get(r);if(Object(o.d)(n)){const i=a&&a.cancelUndispatched?a.cancelUndispatched(n,$):$(n);if(i&&(void 0!==i.error||void 0!==i.result))return _.delete(r),i.id=n.id,O.responseCanceled(i,n,e),void t.writer.write(i)}}I(_,e)}finally{A()}};function M(){if(k===h.Closed)throw new l(u.Closed,"Connection is closed.");if(N())throw new l(u.Unsubscribed,"Connection is unsubscribed.")}const U={sendNotification:(e,r)=>{M();const n={jsonrpc:b,method:e,params:r};O.notificationSent(n),t.writer.write(n)},onNotification:(e,t)=>{M(),"function"==typeof e?y=e:t&&(g[e]={type:void 0,handler:t})},sendRequest:(e,r,i)=>{M(),function(){if(!D())throw new Error("Call listen() first.")}(),i=n.b.is(i)?i:void 0;const s=d++,a=new Promise((n,i)=>{const a={jsonrpc:b,id:s,method:e,params:r};let u={method:e,request:S===c.a.Verbose?a:void 0,timerStart:Date.now(),resolve:n,reject:i};O.requestSent(a);try{t.writer.write(a)}catch(e){u.reject(new o.b(o.a.MessageWriteError,e.message?e.message:"Unknown reason")),u=null}u&&(E[String(s)]=u)});return i&&i.onCancellationRequested(()=>{U.sendNotification(n.a.type,{id:s})}),a},onRequest:(e,t)=>{M(),"function"==typeof e?m=e:t&&(v[e]={type:void 0,handler:t})},trace:(e,t,r=!1)=>{O=(S=e)===c.a.Off?c.b:t},onError:P.event,onClose:T.event,onUnhandledNotification:C.event,onUnsubscribe:j.event,unsubscribe:()=>{if(!N()){k=h.Unsubscribed,j.fire(void 0);for(const e of Object.keys(E))E[e].reject(new l(u.Unsubscribed,`The underlying JSON-RPC connection got unsubscribed while responding to this ${E[e].method} request.`));E=Object.create(null),x=Object.create(null),_=new s.a,t.writer.unsubscribe(),t.reader.unsubscribe()}},listen:()=>{M(),function(){if(D())throw new l(u.AlreadyListening,"Connection is already listening")}(),k=h.Listening,t.reader.listen(L)}};return U}(t,r,d)}!function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Unsubscribed=4]="Unsubscribed"}(h||(h={}))}).call(this,r(10).setImmediate)},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(i.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new s(i.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(11),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(4))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,i=1,s={},o=!1,c=e.document,a=Object.getPrototypeOf&&Object.getPrototypeOf(e);a=a&&a.setTimeout?a:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick(function(){h(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&h(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),n=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){h(e.data)},n=function(t){e.port2.postMessage(t)}}():c&&"onreadystatechange"in c.createElement("script")?function(){var e=c.documentElement;n=function(t){var r=c.createElement("script");r.onreadystatechange=function(){h(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():n=function(e){setTimeout(h,0,e)},a.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var o={callback:e,args:t};return s[i]=o,n(i),i++},a.clearImmediate=u}function u(e){delete s[e]}function h(e){if(o)setTimeout(h,0,e);else{var t=s[e];if(t){o=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}(t)}finally{u(e),o=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(4),r(12))},function(e,t){var r,n,i=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function c(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var a,u=[],h=!1,l=-1;function d(){h&&a&&(h=!1,a.length?u=a.concat(u):l=-1,u.length&&f())}function f(){if(!h){var e=c(d);h=!0;for(var t=u.length;t;){for(a=u,u=[];++l<t;)a&&a[l].run();l=-1,t=u.length}a=null,h=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function b(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new p(e,t)),1!==u.length||h||c(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=b,i.addListener=b,i.once=b,i.off=b,i.removeListener=b,i.removeAllListeners=b,i.emit=b,i.prependListener=b,i.prependOnceListener=b,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";r.r(t);var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function s(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{a(n.next(e))}catch(e){s(e)}}function c(e){try{a(n.throw(e))}catch(e){s(e)}}function a(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,c)}a((n=n.apply(e,t||[])).next())})}var o=Array.isArray||function(e){return e&&"number"==typeof e.length};function c(e){return null!=e&&"object"==typeof e}function a(e){return"function"==typeof e}var u,h={e:{}};function l(){try{return u.apply(this,arguments)}catch(e){return h.e=e,h}}function d(e){return u=e,l}function f(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}f.prototype=Object.create(Error.prototype);var p=f,b=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var r=this._parent,n=this._parents,i=this._unsubscribe,s=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var u=-1,l=n?n.length:0;r;)r.remove(this),r=++u<l&&n[u]||null;if(a(i))d(i).call(this)===h&&(t=!0,e=e||(h.e instanceof p?m(h.e.errors):[h.e]));if(o(s))for(u=-1,l=s.length;++u<l;){var f=s[u];if(c(f))if(d(f.unsubscribe).call(f)===h){t=!0,e=e||[];var b=h.e;b instanceof p?e=e.concat(m(b.errors)):e.push(b)}}if(t)throw new p(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var r=t;switch(typeof t){case"function":r=new e(t);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;(r=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.prototype._addParent=function(e){var t=this._parent,r=this._parents;t&&t!==e?r?-1===r.indexOf(e)&&r.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function m(e){return e.reduce(function(e,t){return e.concat(t instanceof p?t.errors:t)},[])}function v(e){return new Proxy(Object.create(null),{get:(t,r)=>(t[r]||"$"!==r[0]||(t[r]=((...t)=>e(r,t))),t[r])})}function y(e,t,r){const n=Object.getPrototypeOf(r);for(const i of Object.getOwnPropertyNames(n)){const s=n[i];"$"===i[0]&&"function"==typeof s&&e.onRequest(`${t}/${i}`,(...e)=>s.apply(r,e[0]))}}var g=r(9),w=r(8);class _{constructor(e){this.unsubscribeProvider=e,this.idSequence=0,this.map=new Map}add(e){const t=this.idSequence;return this.map.set(t,e),this.idSequence++,{id:t,subscription:{unsubscribe:()=>this.remove(t)}}}get(e){const t=this.map.get(e);if(void 0===t)throw new Error(`no provider with ID ${e}`);return t}remove(e){if(!this.map.has(e))throw new Error(`no provider with ID ${e}`);try{this.unsubscribeProvider(e)}finally{this.map.delete(e)}}unsubscribe(){try{for(const e of this.map.keys())this.unsubscribeProvider(e)}finally{this.map.clear()}}}class E{constructor(e){this.proxy=e,this.registrations=new _(e=>this.proxy.$unregister(e))}$executeCommand(e,t){const{callback:r}=this.registrations.get(e);return Promise.resolve(r(...t))}executeCommand(e,t){return this.proxy.$executeCommand(e,t)}registerCommand(e){const{id:t,subscription:r}=this.registrations.add(e);return this.proxy.$registerCommand(t,e.command),r}}var x=!1,S={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;x=e},get useDeprecatedSynchronousErrorHandling(){return x}};function O(e){setTimeout(function(){throw e})}var k={closed:!0,next:function(e){},error:function(e){if(S.useDeprecatedSynchronousErrorHandling)throw e;O(e)},complete:function(){}},P="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),T=function(e){function t(r,n,i){var s=e.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,s._parentSubscription=null,arguments.length){case 0:s.destination=k;break;case 1:if(!r){s.destination=k;break}if("object"==typeof r){r instanceof t?(s.syncErrorThrowable=r.syncErrorThrowable,s.destination=r,r.add(s)):(s.syncErrorThrowable=!0,s.destination=new C(s,r));break}default:s.syncErrorThrowable=!0,s.destination=new C(s,r,n,i)}return s}return i(t,e),t.prototype[P]=function(){return this},t.create=function(e,r,n){var i=new t(e,r,n);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this._parentSubscription=null,this},t}(b),C=function(e){function t(t,r,n,i){var s,o=e.call(this)||this;o._parentSubscriber=t;var c=o;return a(r)?s=r:r&&(s=r.next,n=r.error,i=r.complete,r!==k&&(a((c=Object.create(r)).unsubscribe)&&o.add(c.unsubscribe.bind(c)),c.unsubscribe=o.unsubscribe.bind(o))),o._context=c,o._next=s,o._error=n,o._complete=i,o}return i(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;S.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,r=S.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):O(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;O(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};S.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),S.useDeprecatedSynchronousErrorHandling)throw e;O(e)}},t.prototype.__tryOrSetError=function(e,t,r){if(!S.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(t){return S.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(O(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(T);var j="function"==typeof Symbol&&Symbol.observable||"@@observable";function R(){}function I(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:R}var $=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,i=function(e,t,r){if(e){if(e instanceof T)return e;if(e[P])return e[P]()}return e||t||r?new T(e,t,r):new T(k)}(e,t,r);if(n?n.call(i,this.source):i.add(this.source||S.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),S.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){S.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){var t=e,r=t.closed,n=t.destination,i=t.isStopped;if(r||i)return!1;e=n&&n instanceof T?n:null}return!0}(e)?console.warn(t):e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=D(t))(function(t,n){var i;i=r.subscribe(function(t){try{e(t)}catch(e){n(e),i&&i.unsubscribe()}},n,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[j]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:I(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=D(e))(function(e,r){var n;t.subscribe(function(e){return n=e},function(e){return r(e)},function(){return e(n)})})},e.create=function(t){return new e(t)},e}();function D(e){if(e||(e=S.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function N(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}N.prototype=Object.create(Error.prototype);var q=N,A=function(e){function t(t,r){var n=e.call(this)||this;return n.subject=t,n.subscriber=r,n.closed=!1,n}return i(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},t}(b),L=function(e){function t(t){var r=e.call(this,t)||this;return r.destination=t,r}return i(t,e),t}(T),M=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return i(t,e),t.prototype[P]=function(){return new L(this)},t.prototype.lift=function(e){var t=new U(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new q;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new q;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new q;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new q;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new q;return this.hasError?(e.error(this.thrownError),b.EMPTY):this.isStopped?(e.complete(),b.EMPTY):(this.observers.push(e),new A(this,e))},t.prototype.asObservable=function(){var e=new $;return e.source=this,e},t.create=function(e,t){return new U(e,t)},t}($),U=function(e){function t(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return i(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):b.EMPTY},t}(M),H=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r}return i(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r&&!r.closed&&t.next(this._value),r},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new q;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(M);var J=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new V(e,this.predicate,this.thisArg))},e}(),V=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.predicate=r,i.thisArg=n,i.count=0,i}return i(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(T);class z{constructor(e,t){this.proxy=e,this.data=t}get(e){return this.data[e]}update(e,t){return s(this,void 0,void 0,function*(){yield this.proxy.$acceptConfigurationUpdate({path:[e],value:t})})}get value(){return this.data}toJSON(){return this.data}}class F{constructor(e){this.proxy=e,this.data=new H(null)}$acceptConfigurationData(e){return this.data.next(Object.freeze(e)),Promise.resolve()}get(){const e=this.data.value;if(null===e)throw new Error("Configuration is not yet available. `sourcegraph.configuration.get` is not usable until after the extension `activate` function is finished executing. This is a known issue and will be fixed before the beta release of Sourcegraph extensions. In the meantime, work around this limitation by deferring calls to `get`.");return Object.freeze(new z(this.proxy,e.final))}subscribe(e){return this.data.pipe(function(e,t){return function(r){return r.lift(new J(e,t))}}(e=>null!==e)).subscribe(e)}}class B{constructor(e){this.proxy=e}updateContext(e){this.proxy.$acceptContextUpdates(e)}}class W{constructor(e){this.sync=e,this.documents=new Map,this.textDocumentAdds=new M,this.onDidOpenTextDocument=this.textDocumentAdds}get(e){const t=this.documents.get(e);if(!t)throw new Error(`document not found: ${e}`);return t}getSync(e){return s(this,void 0,void 0,function*(){const t=this.documents.get(e);return t||(yield this.sync(),this.get(e))})}getAll(){return Array.from(this.documents.values())}$acceptDocumentData(e){if(e)for(const t of e){const e=!this.documents.has(t.uri);this.documents.set(t.uri,t),e&&this.textDocumentAdds.next(t)}}}function Q(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}class Y{static min(...e){let t=e.pop();if(void 0!==t){for(const r of e)r.isBefore(t)&&(t=r);return t}}static max(...e){let t=e.pop();if(void 0!==t){for(const r of e)r.isAfter(t)&&(t=r);return t}}static isPosition(e){if(!e)return!1;if(e instanceof Y)return!0;const{line:t,character:r}=e;return"number"==typeof t&&"number"==typeof r}get line(){return this._line}get character(){return this._character}constructor(e,t){if(e<0)throw Q("line must be non-negative");if(t<0)throw Q("character must be non-negative");this._line=e,this._character=t}isBefore(e){return this._line<e.line||!(e.line<this._line)&&this._character<e.character}isBeforeOrEqual(e){return this._line<e.line||!(e.line<this._line)&&this._character<=e.character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e.line&&this._character===e.character}compareTo(e){return this._line<e.line?-1:this._line>e.line?1:this._character<e.character?-1:this._character>e.character?1:0}translate(e,t=0){if(null===e||null===t)throw Q();let r;return void 0===e?r=0:"number"==typeof e?r=e:(r="number"==typeof e.lineDelta?e.lineDelta:0,t="number"==typeof e.characterDelta?e.characterDelta:0),0===r&&0===t?this:new Y(this.line+r,this.character+t)}with(e,t=this.character){if(null===e||null===t)throw Q();let r;return void 0===e?r=this.line:"number"==typeof e?r=e:(r="number"==typeof e.line?e.line:this.line,t="number"==typeof e.character?e.character:this.character),r===this.line&&t===this.character?this:new Y(r,t)}toJSON(){return{line:this.line,character:this.character}}}class K{static isRange(e){return e instanceof K||!!e&&(Y.isPosition(e.start)&&Y.isPosition(e.end))}get start(){return this._start}get end(){return this._end}constructor(e,t,r,n){let i,s;if("number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof n?(i=new Y(e,t),s=new Y(r,n)):e instanceof Y&&t instanceof Y&&(i=e,s=t),!i||!s)throw new Error("Invalid arguments");i.isBefore(s)?(this._start=i,this._end=s):(this._start=s,this._end=i)}contains(e){return e instanceof K?this.contains(e._start)&&this.contains(e._end):e instanceof Y&&(!e.isBefore(this._start)&&!this._end.isBefore(e))}isEqual(e){return this._start.isEqual(e.start)&&this._end.isEqual(e.end)}intersection(e){const t=Y.max(e.start,this._start),r=Y.min(e.end,this._end);if(!t.isAfter(r))return new K(t,r)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;const t=Y.min(e.start,this._start),r=Y.max(e.end,this.end);return new K(t,r)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,t=this.end){if(null===e||null===t)throw Q();let r;return e?Y.isPosition(e)?r=e:(r=e.start||this.start,t=e.end||this.end):r=this.start,r.isEqual(this._start)&&t.isEqual(this.end)?this:new K(r,t)}toJSON(){return{start:this._start.toJSON(),end:this._end.toJSON()}}}function G(e){return new Y(e.line,e.character)}function X(e){return{uri:e.uri.toString(),range:Z(e.range)}}function Z(e){if(e)return e instanceof K?e.toJSON():e}class ee{constructor(e,t){this.proxy=e,this.documents=t,this.registrations=new _(e=>this.proxy.$unregister(e))}$provideHover(e,t,r){return s(this,void 0,void 0,function*(){const n=this.registrations.get(e);return Promise.resolve(n.provideHover(yield this.documents.getSync(t),G(r))).then(e=>e?function(e){return{contents:e.contents,__backcompatContents:e.__backcompatContents,range:Z(e.range)}}(e):e)})}registerHoverProvider(e,t){const{id:r,subscription:n}=this.registrations.add(t);return this.proxy.$registerHoverProvider(r,e),n}$provideDefinition(e,t,r){return s(this,void 0,void 0,function*(){const n=this.registrations.get(e);return Promise.resolve(n.provideDefinition(yield this.documents.getSync(t),G(r))).then(re)})}registerDefinitionProvider(e,t){const{id:r,subscription:n}=this.registrations.add(t);return this.proxy.$registerDefinitionProvider(r,e),n}$provideTypeDefinition(e,t,r){return s(this,void 0,void 0,function*(){const n=this.registrations.get(e);return Promise.resolve(n.provideTypeDefinition(yield this.documents.getSync(t),G(r))).then(re)})}registerTypeDefinitionProvider(e,t){const{id:r,subscription:n}=this.registrations.add(t);return this.proxy.$registerTypeDefinitionProvider(r,e),n}$provideImplementation(e,t,r){return s(this,void 0,void 0,function*(){const n=this.registrations.get(e);return Promise.resolve(n.provideImplementation(yield this.documents.getSync(t),G(r))).then(re)})}registerImplementationProvider(e,t){const{id:r,subscription:n}=this.registrations.add(t);return this.proxy.$registerImplementationProvider(r,e),n}$provideReferences(e,t,r,n){return s(this,void 0,void 0,function*(){const i=this.registrations.get(e);return Promise.resolve(i.provideReferences(yield this.documents.getSync(t),G(r),n)).then(te)})}registerReferenceProvider(e,t){const{id:r,subscription:n}=this.registrations.add(t);return this.proxy.$registerReferenceProvider(r,e),n}}function te(e){return e?e.map(e=>X(e)):e}function re(e){return e?Array.isArray(e)?e.map(e=>X(e)):X(e):e}class ne{constructor(e){this.proxy=e,this.registrations=new _(e=>this.proxy.$unregister(e))}registerQueryTransformer(e){const{id:t,subscription:r}=this.registrations.add(e);return this.proxy.$registerQueryTransformer(t),r}$transformQuery(e,t){const r=this.registrations.get(e);return Promise.resolve(r.transformQuery(t))}}class ie{constructor(e,t,r){this.proxy=e,this.id=t,this.subscription=r,this._title="",this._content=""}get title(){return this._title}set title(e){this._title=e,this.proxy.$acceptPanelViewUpdate(this.id,{title:e})}get content(){return this._content}set content(e){this._content=e,this.proxy.$acceptPanelViewUpdate(this.id,{content:e})}unsubscribe(){return this.subscription.unsubscribe()}}class se{constructor(e){this.proxy=e,this.registrations=new _(e=>this.proxy.$unregister(e))}createPanelView(e){const{id:t,subscription:r}=this.registrations.add({});return this.proxy.$registerPanelViewProvider(t,{id:e}),new ie(this.proxy,t,r)}}class oe{constructor(e,t,r){this.resource=e,this.proxy=t,this.documents=r,this.type="CodeEditor"}get document(){return this.documents.get(this.resource)}setDecorations(e,t){this.proxy.$setDecorations(this.resource,t.map(ce))}toJSON(){return{type:this.type,document:this.document}}}function ce(e){return Object.assign({},e,{range:e.range.toJSON()})}class ae{constructor(e,t){this.windowsProxy=e,this.visibleViewComponents=t}showNotification(e){this.windowsProxy.$showNotification(e)}showMessage(e){return this.windowsProxy.$showMessage(e)}showInputBox(e){return this.windowsProxy.$showInputBox(e)}toJSON(){return{visibleViewComponents:this.visibleViewComponents}}}class ue{constructor(e,t,r){this.windowsProxy=e,this.codeEditorProxy=t,this.documents=r,this.data=[]}getActive(){return this.getAll()[0]}getAll(){return this.data.map(e=>new ae(this.windowsProxy,e.visibleTextDocument?[new oe(e.visibleTextDocument,this.codeEditorProxy,this.documents)]:[]))}$acceptWindowData(e){this.data=e}}class he{constructor(e){this.value=e}static parse(e){return new he(e)}static file(e){return new he(`file://${e}`)}static isURI(e){return e instanceof he||"string"==typeof e}toString(){return this.value}toJSON(){return this.value}}class le{static isLocation(e){return e instanceof le||!!e&&(K.isRange(e.range)&&he.isURI(e.uri))}constructor(e,t){if(this.uri=e,t)if(t instanceof K)this.range=t;else{if(!(t instanceof Y))throw new Error("Illegal argument");this.range=new K(t,t)}else;}toJSON(){return{uri:this.uri,range:this.range}}}class de extends K{static isSelection(e){return e instanceof de||!!e&&(K.isRange(e)&&Y.isPosition(e.anchor)&&Y.isPosition(e.active)&&"boolean"==typeof e.isReversed)}get anchor(){return this._anchor}get active(){return this._active}constructor(e,t,r,n){let i,s;if("number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof n?(i=new Y(e,t),s=new Y(r,n)):e instanceof Y&&t instanceof Y&&(i=e,s=t),!i||!s)throw new Error("Invalid arguments");super(i,s),this._anchor=i,this._active=s}get isReversed(){return this._anchor===this._end}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}}const fe={error(e){console.error(e)},warn(e){console.warn(e)},info(e){console.info(e)},log(e){console.log(e)}};function pe(e,t=Object(w.a)()){const r=Object(g.a)(t,fe);return r.listen(),function(e,t){(new b).add(t);const r=()=>t.sendRequest("ping");t.onRequest("ping",()=>"pong");const n=e=>v((r,n)=>t.sendRequest(`${e}/${r}`,n)),i=new B(n("context"));y(t,"context",i);const s=new W(r);y(t,"documents",s);const o=new ue(n("windows"),n("codeEditor"),s);y(t,"windows",o);const c=new se(n("views"));y(t,"views",c);const a=new F(n("configuration"));y(t,"configuration",a);const u=new ee(n("languageFeatures"),s);y(t,"languageFeatures",u);const h=new ne(n("search"));y(t,"search",h);const l=new E(n("commands"));return y(t,"commands",l),{URI:he,Position:Y,Range:K,Selection:de,Location:le,MarkupKind:{PlainText:"plaintext",Markdown:"markdown"},app:{get activeWindow(){return o.getActive()},get windows(){return o.getAll()},createPanelView:e=>c.createPanelView(e)},workspace:{get textDocuments(){return s.getAll()},onDidOpenTextDocument:s.onDidOpenTextDocument},configuration:{get:()=>a.get(),subscribe:e=>a.subscribe(e)},languages:{registerHoverProvider:(e,t)=>u.registerHoverProvider(e,t),registerDefinitionProvider:(e,t)=>u.registerDefinitionProvider(e,t),registerTypeDefinitionProvider:(e,t)=>u.registerTypeDefinitionProvider(e,t),registerImplementationProvider:(e,t)=>u.registerImplementationProvider(e,t),registerReferenceProvider:(e,t)=>u.registerReferenceProvider(e,t)},search:{registerQueryTransformer:e=>h.registerQueryTransformer(e)},commands:{registerCommand:(e,t)=>l.registerCommand({command:e,callback:t}),executeCommand:(e,...t)=>l.executeCommand(e,t)},internal:{sync:r,updateContext:e=>i.updateContext(e),sourcegraphURL:new he(e.sourcegraphURL),clientApplication:e.clientApplication}}}(e,r)}!function(e){e.addEventListener("message",function t(r){return s(this,void 0,void 0,function*(){try{e.removeEventListener("message",t),r.origin&&r.origin!==e.location.origin&&(console.error(`Invalid extension host message origin: ${r.origin} (expected ${e.location.origin})`),e.close());const n=r.data;"string"!=typeof n.bundleURL&&(console.error(`Invalid extension bundle URL: ${n.bundleURL}`),e.close());const i=pe(n);e.require=(e=>{if("sourcegraph"===e)return i;throw new Error(`require: module not found: ${e}`)}),e.exports={},e.module={},e.importScripts(n.bundleURL);const s=e.module.exports;delete e.module,"activate"in s?yield Promise.resolve(s.activate()):console.error("Extension did not export an 'activate' function.")}catch(e){console.error("Extension host is terminating because the extension's activate function threw an error.",e)}})})}(self)}]);